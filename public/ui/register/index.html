<!doctype html><meta charset="utf-8"><title>GroFriends — Registro</title>
<!-- Usa el mismo CSS base que en /ui -->
<style>
/* ... mismo CSS base ... */
</style>
<body data-theme="pastel">
<div class="app">
  <div class="header"><h1>Crear cuenta</h1></div>
  <div class="card">
    <form id="regForm" class="grid">
      <input id="email" type="email" placeholder="Email" required>
      <input id="name" type="text" placeholder="Nombre (opcional)">
      <input id="password" type="password" placeholder="Password (min 8)" required minlength="8">
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button>Registrar</button>
        <a class="tab" href="/ui">Iniciar sesión</a>
      </div>
    </form>
    <div id="msg" class="muted"></div>
  </div>
</div>
<script>
const $ = s => document.querySelector(s);
document.body.setAttribute("data-theme","pastel");
$("#regForm").addEventListener("submit", async (e)=>{
  e.preventDefault(); $("#msg").textContent = "Creando usuario…";
  try{
    const body = { email: $("#email").value.trim().toLowerCase(), name: $("#name").value.trim(), password: $("#password").value };
    const r = await fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"}, body: JSON.stringify(body)});
    const j = await r.json();
    if(!j.ok){ $("#msg").innerHTML = '<span class="err">'+(j.error||'Error')+'</span>'; return; }
    $("#msg").innerHTML = '<span class="ok">Cuenta creada. Redirigiendo…</span>';
    setTimeout(()=>location.href="/ui",700);
  }catch(err){ $("#msg").innerHTML = '<span class="err">'+err.message+'</span>'; }
});
</script>
</body>
